---
all:
  vars:
    # Armbian default user (root for first login, or custom user after setup)
    ansible_user: root
    ansible_ssh_private_key_file: ~/.ssh/workbench
    ansible_python_interpreter: /usr/bin/python3

    # Environment identifier
    target_environment: server

    # Turing Pi BMC
    tpi_bmc_host: 10.10.88.70

    # Cluster configuration (matches Talos setup)
    cluster_name: turing-cluster
    cluster_domain: cluster.local

    # Networking
    pod_cidr: "10.244.0.0/16"
    service_cidr: "10.96.0.0/12"
    cluster_dns: "10.96.0.10"

    # MetalLB
    metallb_ip_range: "10.10.88.80-10.10.88.89"
    ingress_ip: "10.10.88.80"

    # Portainer (external server)
    portainer_server: "10.10.81.81"
    portainer_port: 9001

    # Storage
    longhorn_path: /var/lib/longhorn
    longhorn_replicas: 2

    # K3s version (token loaded from secrets)
    k3s_version: "v1.31.3+k3s1"

    # NPU/RKNN
    rknn_version: "2.3.2"
    install_rknn: true

  children:
    controlplane:
      hosts:
        node1:
          ansible_host: 10.10.88.73
          tpi_node: 1
          k3s_role: server
          has_nvme: true

    workers:
      hosts:
        node2:
          ansible_host: 10.10.88.74
          tpi_node: 2
          k3s_role: agent
          has_nvme: true
        node3:
          ansible_host: 10.10.88.75
          tpi_node: 3
          k3s_role: agent
          has_nvme: true
        node4:
          ansible_host: 10.10.88.76
          tpi_node: 4
          k3s_role: agent
          has_nvme: true

    k3s_cluster:
      children:
        controlplane:
        workers:

    # Nodes with NPU capability
    npu_nodes:
      children:
        controlplane:
        workers:
